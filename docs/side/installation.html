<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="styles.css">
<link rel="icon" type="image/x-icon" href="favicon.png">
</head>
<body>
<div class="container">
<div class="column" id="column1">
<div class="logo">
<img src="biscuit_logo.svg">
<label class="version">release/0.11.0</label>
</div>
<ul id="menu-top-level">
<li id="menu-top-level-item"><a href="index.html">Home</a></li>
<li id="menu-top-level-item"><a href="installation.html">Installation</a></li>
<li id="menu-top-level-item"><a href="manual.html">Manual</a></li>
<li id="menu-top-level-item"><a href="modules.html">Modules</a></li>
<li id="menu-top-level-item"><a href="examples.html">Examples</a></li>
</ul>
</div>
<div class="column" id="column2">
<h1 id="Use-Pre-built-Package">Use Pre-built Package</h1>
<ul>
<li>Download required compiler version from <a href="https://github.com/travisdoor/bl/releases">Github</a>.</li>
<li>Unpack downloaded file.</li>
<li>Optionally add <code>/path/to/blc/bin</code> to your system <code>PATH</code>.</li>
<li>Run <code>blc --help</code>.</li>
</ul>
<h1 id="Build-from-Source-Code">Build from Source Code</h1>
<p>Biscuit compiler is written in C and all major dependencies are packed in the compiler repository except <a href="https://llvm.org/">LLVM</a>. <a href="https://cmake.org">CMake</a> is used as a build system.</p>
<h2 id="Supported-targets">Supported targets</h2>
<ul>
<li><code>x86_64-pc-windows-msvc</code></li>
<li><code>x86_64-pc-linux-gnu</code></li>
<li><code>x86_64-unknown-linux-gnu</code></li>
<li><code>x86_64-apple-darwin</code></li>
<li><code>arm64-apple-darwin</code> (experimental)</li>
</ul>
<h2 id="Windows">Windows</h2>
<ul>
<li>Install Visual Studio 2022 or <a href="https://visualstudio.microsoft.com/visual-cpp-build-tools">MS Build Tools</a> with C/C++ support</li>
<li>Download and compile</li>
</ul>

<pre><code>git clone https://github.com/travisdoor/bl.git
cd bl
mkdir build
cd build
cmake .. -G "Visual Studio 17 2022" -DCMAKE_BUILD_TYPE=Release"
cmake --build . --config Release
</code></pre>
<ul>
<li>You can add <code>bin</code> directory to the system <code>PATH</code>.</li>
</ul>
<p><b>In Powershell:</b></p>

<pre><code>[Environment]::SetEnvironmentVariable(
   "Path",
   [Environment]::GetEnvironmentVariable("Path", "User") + ";path\to\bl\bin",
   "User"
)
</code></pre>
<h2 id="Linux">Linux</h2>
<ul>
<li>Install LLVM</li>
</ul>
<p>This step might differ across linux distributions, following snippet might help. You might want to use  <code>-DLLVM_DIR</code> pointing to the custom location with LLVM.</p>

<pre><code># Ubuntu
apt-get install llvm-16-dev

# Fedora
dnf copr enable -y @fedora-llvm-team/llvm-snapshots
dnf install llvm16-devel

# Using LLVM installation script
mkdir llvm-16
cd llvm-16
wget https://apt.llvm.org/llvm.sh
chmod +x llvm.sh
sudo ./llvm.sh 16
</code></pre>
<ul>
<li>Download and compile</li>
</ul>

<pre><code>git clone https://github.com/travisdoor/bl.git
cd bl
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
cmake --build . --config=Release
</code></pre>
<ul>
<li>You can add <code>bin</code> directory to the system <code>PATH</code>.</li>
</ul>

<pre><code>export PATH=$PATH:/path/to/bl/bin
</code></pre>
<h2 id="macOS">macOS</h2>
<ul>
<li>Install command line tools <code>xcode-select --install</code>.</li>
<li>Install LLVM using <a href="https://brew.sh">brew</a> <code>brew install llvm@16</code> or you might want to use  <code>-DLLVM_DIR</code> pointing to the custom location with LLVM.</li>
<li>Download and compile</li>
</ul>

<pre><code>git clone https://github.com/travisdoor/bl.git
cd bl
mkdir build
cd build
cmake .. -DCMAKE_BUILD_TYPE=Release"
cmake --build . --config=Release
</code></pre>
<ul>
<li>You can add <code>bin</code> directory to the system <code>PATH</code>.</li>
</ul>

<pre><code>export PATH=$PATH:/path/to/bl/bin
</code></pre>
<p><span class="hint-warning"><b>Warning:</b>
ARM support is experimental.</span></p>
<h2 id="Additional-Setup">Additional Setup</h2>
<p>Following flags might be passed to CMake during configuration:</p>
<ul>
<li><code>-DCMAKE_BUILD_TYPE=&lt;Release|Debug&gt;</code> - To toggle release/debug configuration.</li>
<li><code>-DCMAKE_INSTALL_PREFIX=&lt;"path"&gt;</code> - To set installation directory.</li>
<li><code>-DTRACY_ENABLE=&lt;ON|OFF&gt;</code> - To toggle <a href="https://github.com/wolfpld/tracy">Tracy profiler</a> integration.</li>
<li><code>-DLLVM_DIR=&lt;"path"&gt;</code> - To set custom path to LLVM dev package. Must point to <code>llvm-directory/lib/cmake/llvm</code>.</li>
<li><code>-DBL_X64_TESTS_ENABLE=&lt;ON|OFF&gt;</code> - To toggle compilation of tests for experimental x64 backend.</li>
<li><code>-DBL_DEVELOPER=&lt;ON|OFF&gt;</code> - To toggle some incomplete experimental features (for example x64 backend).</li>
<li><code>-DBL_ASSERT_ENABLE=&lt;ON|OFF&gt;</code> - To toggle asserts (by default disabled in release mode).</li>
<li><code>-DBL_SIMD_ENABLE=&lt;ON|OFF&gt;</code> - To toggle SIMD. <em>Windows only</em></li>
<li><code>-DBL_RPMALLOC_ENABLE=&lt;ON|OFF&gt;</code> - To toggle <a href="https://github.com/mjansson/rpmalloc">rpmalloc</a>.</li>
</ul>
<h2 id="Configuration">Configuration</h2>
<p>The compiler requires configuration file to be generated before the first use.</p>
<p>Default configuration file <code>/path/to/bl/etc/bl.yaml</code> is created automatically on the first run. You can use <code>blc --where-is-config</code> to get full path to the default config file. To generate new one use <code>blc --configure</code> (the old one will be kept as a backup).</p>
<p><b>Example Windows config file:</b></p>

<pre><code># Automatically generated configuration file used by 'blc' compiler.
# To generate new one use 'blc --configure' command.

# Compiler version, this should match the executable version 'blc --version'.
version: "0.11.0"

# Main API directory containing all modules and source files. This option is mandatory.
lib_dir: "C:/Develop/bl/lib/bl/api"

# Current default environment configuration.
x86_64-pc-windows-msvc:
    # Platform operating system preload file (relative to 'lib_dir').
    preload_file: "os/_windows.bl"
    # Optional path to the linker executable, 'lld' linker is used by default on some platforms.
    linker_executable: ""
    # Linker flags and options used to produce executable binaries.
    linker_opt_exec: "/NOLOGO /ENTRY:__os_start /SUBSYSTEM:CONSOLE /INCREMENTAL:NO /MACHINE:x64"
    # Linker flags and options used to produce shared libraries.
    linker_opt_shared: "/NOLOGO /INCREMENTAL:NO /MACHINE:x64 /DLL"
    # File system location where linker should lookup for dependencies.
    linker_lib_path: "C:/Program Files (x86)/Windows Kits/10/Lib/10.0.22000.0/ucrt/x64;C:/Program Files (x86)/Windows Kits/10/Lib/10.0.22000.0/um/x64;C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.32.31326//lib/x64"
</code></pre>
<h2 id="Unit-Tests">Unit Tests</h2>
<p>To run compiler unit tests use:</p>

<pre><code>cd path/to/bl/directory
blc -run doctor.bl
</code></pre>
</div>
<div class="column" id="column3">
<ul id="menu-top-level">
<li id="menu-top-level-item"><a href="#Use-Pre-built-Package">Use Pre-built Package</a></li>
<li id="menu-top-level-item"><a href="#Build-from-Source-Code">Build from Source Code</a></li>
<ul>
<li><a href="#Supported-targets">Supported targets</a></li>
<li><a href="#Windows">Windows</a></li>
<li><a href="#Linux">Linux</a></li>
<li><a href="#macOS">macOS</a></li>
<li><a href="#Additional-Setup">Additional Setup</a></li>
<li><a href="#Configuration">Configuration</a></li>
<li><a href="#Unit-Tests">Unit Tests</a></li>
</ul>
</ul>
</div>
</div>
</body>
</html>
